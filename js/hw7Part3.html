<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript / AJAX Programming</title>
  <!-- Bootstrap link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <!-- Bootstrap script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="linkBack.css">
  <link rel="stylesheet" href="navLinks.css">

  <style>
    form {
      position: relative;
      width: 400px;
      margin: 0 auto;
    }
  </style>

</head>

<body>

  <h2 class="text-center mt-5">Part 3 | LS</h2>
  <h4 class="text-center">Home work 7</h4>
  <p class="text-center mb-5">Local Storage</p>

  <form class="border p-3" id="form">
  
    <!-- input for name / local storage -->
    <div class="mt-3">
      <label for="phone" class="form-label">
        Enter name 
      </label>
      <input type="text" 
             class="form-control" 
             id="key"
             onfocus="clearAlert(this)" 
             placeholder="Name">
    </div>
  
    <!-- alert -->
    <div id="alerto" class="text-center lead text-danger fw-semibold mt-2"></div>
  
    <!-- btns -->
    <div class="d-flex justify-content-evenly">
      <button class="btn btn-outline-success mx-1 px-5 mt-3 rounded-1" id="btn" type="submit">
        Submit
      </button>
  
      <button class="btn btn-outline-danger mx-1 px-5 mt-3 rounded-1" id="reset">
        Reset
      </button>
    </div>
  
  </form>

  <p id="output" class="text-center my-5"></p>

<button class="btn btn-warning border-dark vstack mx-auto my-5 rounded-1" id="clearLS" type="button">
  Clear Local Storage
</button>
  
  




  <script>

  const btn = document.getElementById('btn')
  const reset = document.getElementById('reset')
  const output = document.getElementById('output')
  const name = document.getElementById('key')
  const clearLS = document.getElementById('clearLS')
  const form = document.getElementById('form')
  let key = 'userName'


  document.addEventListener("DOMContentLoaded", () => {

    const valueFromLS = localStorage.getItem(key)

    if(valueFromLS !== null) {
      form.style.display = 'none'
      output.textContent = 'Welcome back: ' + valueFromLS 
    } else {
       clearLS.style.display = 'none'
    }
    
  })


   clearLS.addEventListener('click', () => {
      name.value = '' 
      localStorage.removeItem(key)
      form.style.display = 'block'
      clearLS.style.display = 'none'
      output.textContent = ''
       
     
    })

  
  btn.addEventListener('click', e => {
    e.preventDefault()
    let value = name.value
    localStorage.setItem(key, value )

    const valueFromLS = localStorage.getItem(key)
    output.textContent = `The name: '` +  valueFromLS + `' is saved to local storage!`
  })
  


  reset.addEventListener('click', e => {
    e.preventDefault()
    name.value = ''
  })


 
  </script>





  


  <!-- link back -->
  <a href="../js/hw7.html" class="btn btn-dark rounded-1 vstack mx-auto my-5" style="width: 150px;">
    Go Back
  </a>





</body>

</html>