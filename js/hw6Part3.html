<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript / AJAX Programming</title>
  <!-- Bootstrap link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <!-- Bootstrap script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="linkBack.css">
  <link rel="stylesheet" href="navLinks.css">

 
  <style>
    #output {
      position: relative;
      width: 400px;
      margin: 0 auto;
      background-color: white;
    }
    
    form {
      position: relative;
      width: 400px;
      margin: 0 auto;
      background-color: white;
    }  

    .hidden {
      display: none;
    }

    .show {
      display: block;
    }
  </style>

</head>


<body>

  <h2 class="text-center mt-5">Part 3 | Objects</h2>
  <h4 class="text-center">Home work 6</h4>
  <p class="text-center mb-5">Formatting Phone Number</p>


  <form class="border p-3">

     <!-- input for phone # -->
    <div class="mt-3">
      <label for="phone" class="form-label">
        Enter your phone number:
      </label>
      <input type="text" 
             class="form-control" 
             onfocus="clearAlert(this)"
             oninput="formatValue(this)"
             placeholder="(123) 456-7890"
             id="phone">
    </div>

    <!-- alert -->
    <div id="alerto" class="text-center lead text-danger fw-semibold mt-2"></div>

    <!-- btns -->
    <div class="d-flex justify-content-evenly">
      <button class="btn btn-outline-success mx-1 px-5 mt-3 rounded-1" id="btn" type="submit">
        Submit
      </button>
    
      <button class="btn btn-outline-danger mx-1 px-5 mt-3 rounded-1" id="reset">
        Reset
      </button>
    </div>

  </form>



  <!-- output -->
  <div class="mt-3 border p-3 hidden" id="output">

    <!-- area Code -->
    <div class="mt-3">
      <label for="areaCode" class="form-label">
        Area Code
      </label>
      <input type="text" 
             class="form-control" 
             readonly
             id="areaCode">
    </div>

    <!-- first 3 digits -->
    <div class="mt-3">
      <label for="first3Digits" class="form-label">
        First 3 digits
      </label>
      <input type="text" 
             class="form-control" 
             readonly
             id="first3Digits">
    </div>

    <!-- last 4 digits -->
    <div class="mt-3">
      <label for="last4Digits" class="form-label">
        Last 4 digits
      </label>
      <input type="text" 
             class="form-control" 
             readonly
             id="last4Digits">
    </div>

  </div>


  <!-- link back -->
  <a href="../js/hw6.html" class="btn btn-dark rounded-1 vstack mx-auto my-5" style="width: 150px;">
    Go Back
  </a>


 <script>
  const phone = document.getElementById('phone')
  const btn = document.getElementById('btn')
  const reset = document.getElementById('reset')
  const output = document.getElementById('output')
  const area = document.getElementById('areaCode')
  const first = document.getElementById('first3Digits')
  const last = document.getElementById('last4Digits')
  const alrt = document.getElementById('alerto')
  


  btn.addEventListener('click', e => {
    e.preventDefault()

     // REGEX 
    /* var regex = /^\((\d{3})\) (\d{3})-(\d{4})$/;
       var match = number.match(regex); */

    const number = phone.value
    console.log(number)

   // do we have string number ? 
   const isNumber = !isNaN(parseInt(number[1])) &&
                    !isNaN(parseInt(number[2])) &&
                    !isNaN(parseInt(number[3])) &&
                    !isNaN(parseInt(number[6])) &&
                    !isNaN(parseInt(number[7])) &&
                    !isNaN(parseInt(number[8])) &&
                    !isNaN(parseInt(number[10])) &&
                    !isNaN(parseInt(number[11])) &&
                    !isNaN(parseInt(number[12])) &&
                    !isNaN(parseInt(number[13]))



    // validation               
    if (number.length === 14 && 
        number[0] === '(' && 
        number[4] === ')' && 
        number[5] === ' ' && 
        number[9] === '-' &&
        isNumber
        ) {
       area.value = number.substring(1, 4)
       first.value = number.substring(6, 9)
       last.value = number.substring(10, 14)
       output.classList.remove('hidden')
       output.classList.add('show')

    } else {
       alrt.textContent = 'Please enter the number in the format: (123) 456-7890'
    }


  })


  // clear fields
  reset.addEventListener('click', e => {
    e.preventDefault()
    output.classList.remove('show')
    output.classList.add('hidden')
    area.value = ''
    first.value = ''
    last.value = ''
    phone.value = ''
    alrt.textContent = ''
  })
 


  // format phone number
  function formatValue (phone) {
   let value = phone.value

    value = value.replace(/\D/g, '')

    const size = value.length

    if (size < 4) {
      value = '(' + value
    } else if (size < 7) {
      value = '(' + value.substring(0, 3) + ') ' + value.substring(3)
    } else {
      value = '(' + value.substring(0, 3) + ') ' + value.substring(3, 6) + '-' + value.substring(6, 10)
    }

    if(size < 1) {
      value = ''
    }

    phone.value = value
  
  }


  // clear alert on typing
  function clearAlert (element) {
    document.getElementById('alerto').textContent = ''
  }
 </script>


</body>

</html>