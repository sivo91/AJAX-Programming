<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript / AJAX Programming</title>
  <!-- Bootstrap link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <!-- Bootstrap script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="linkBack.css">
  <link rel="stylesheet" href="navLinks.css">

  <style>
    form {
      position: relative;
      width: 400px;
      margin: 0 auto;
    }

    .hidden {
      display: none;
    }
  </style>

</head>

<body>

  <h2 class="text-center mt-5">Part 2 | Cookies</h2>
  <h4 class="text-center">Home work 7</h4>
  <p class="text-center mb-5">Cookies</p>

  <!-- forom to set cookies -->
  <form class="border p-3" id="form">
  
      <!-- input for name -->
      <div class="mt-3">
        <label for="name" class="form-label">
          Enter your Name
        </label>
        <input type="text" 
              class="form-control" 
              placeholder="Your Name" 
              id="name">
      </div>

      <!-- input for username -->
      <div class="mt-3">
        <label for="name" class="form-label">
          Enter your Username
        </label>
        <input type="text" 
              class="form-control" 
              placeholder="Your Username" 
              id="username">
      </div>
      
      <!-- btns -->
      <div class="d-flex justify-content-evenly">
        <button class="btn btn-outline-success mx-1 px-5 mt-3 rounded-1" 
                id="btn" 
                type="submit">
          Submit
        </button>
      </div>
  
  </form>

  <!-- welocme back user if cookies === true -->
  <p class="text-center my-5" id="output"></p>



  <p id="info" class="fs-3 text-center my-5"></p>


  <!-- script -->
  <script>

      const user = document.getElementById('name')
      const username = document.getElementById('username')
      const btn = document.getElementById('btn')
      const output = document.getElementById('output')
      const form = document.getElementById('form')
      const info = document.getElementById('info')

      const NameKey = 'NAME'
      const AliasKey = 'USERNAME'

     

         // retrieve cookie
         const getCookie = (key) => {

          let cookies = document.cookie.split(';')
 
          for (let i = 0; i < cookies.length; i++) {

            let cookiePair = cookies[i].split('=')
        
            if (key === cookiePair[0].trim()) {
              return cookiePair[1]
            }
          }
          return null
        }


        


        // onload check if cookie === true || false
        document.addEventListener('DOMContentLoaded', () => {

          let data1 = getCookie(NameKey)
          let data2 = getCookie(AliasKey)
 
          // cookies === true
          if(data1 !== '' && data1 !== null) {
    
            form.classList.remove('hidden')
            output.textContent = 'Welcome back ' + data1
            form.style.display = 'none'
            

          }
          
           // cookie === false
           if (data1 === null || data1 === '') {
            form.style.display = 'block'
            output.textContent = ''
            clearCookies.classList.add('hidden')
          }

        })



      // create cookie
      btn.addEventListener('click', e => {
        e.preventDefault()

        nameValue = user.value 
        aliasValue = username.value

        document.cookie = NameKey + '=' + nameValue
        document.cookie = AliasKey + '=' + aliasValue

        info.textContent = 'Cookies created !'
        form.style.display = 'none'

      })








  </script>












  <!-- link back -->
  <a href="../js/hw7.html" class="btn btn-dark rounded-1 vstack mx-auto my-5" style="width: 150px;">
    Go Back
  </a>





</body>

</html>