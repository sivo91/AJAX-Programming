<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript / AJAX Programming</title>
  <!-- Bootstrap link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <!-- Bootstrap script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="linkBack.css">
  <link rel="stylesheet" href="navLinks.css">

    <style>
      table {
        border-collapse: collapse;
        width: 60%;
        margin: 20px auto;
      }
    
      table,
      th,
      td {
        border: 1px solid black;
        text-align: center;
      }
    
      th,
      td {
        padding: 10px;
      }
       
  

      .imgRate {
        position: relative;
        width: 100%;
      }
    </style>
</head>

<body>

  <h2 class="text-center mt-5">Part 2 | Learn about compound interest</h2>
  <h4 class="text-center ">Home work 4 | Looping Statements</h4>
  <p class="text-center">The formula to calculate the compound interest is:</p>
  <p class="text-center lead">A = P(1 + r)
    <sup>n</sup>
  </p>

    <!-- modal show formula -->
    <button type="button" 
            class="btn mb-5 btn-primary vstack mx-auto rounded-1" data-bs-toggle="modal"
            data-bs-target="#exampleModal">
      show formula
    </button>
 
  <!-- table here -->
  <div id="output"></div>




  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">
            Interest Rate 10%
          </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          
         
            <img src="./images/hmw4part2Rates.png" class="imgRate" alt="img">
         

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  
 
  <!-- link back -->
  <a href="../js/hw4.html" class="btn btn-dark rounded-1 vstack mx-auto my-5" style="width: 150px;">
    Go Back
  </a>

  
 <!-- script -->
  <script>
   // func to calculate compound interest
    function calculateCompoundInterest(deposit, rate, years) {
      /* 
       1 + (rate / 100)
       rate / 100 = 0.05, I need to add 1 to get result 1.05,
       now I can calculate 1000 * 1.05, or 1000 * 1.06 ....
       if I omit 1 + (...) ,
       I am getting only year rate 1000 * 0.05 without amount
      */
      return deposit * Math.pow( 1 + (rate / 100), years)
    }

    // generate tables for different interest rates
/*   function generateTables() {
      const deposit = 1000
      const rates = [5, 6, 7]
      const years = 4



     rates.forEach(rate => {
        // create table element
        const table = document.createElement('table')
        // tr
        const tr = table.insertRow(0)
        // td - first cell - year
        const tdYear = tr.insertCell(0)
        tdYear.textContent = 'Year'
        const tdAmount = tr.insertCell(1)
        //td - second cell - amount
        tdAmount.textContent = 'Amount on deposit'
        // td - third cell - rate
        const tdRate = tr.insertCell(2)
        tdRate.textContent = 'Interest Rate '

        // for loop 
        for (let i = 1; i <= years; i++) {
          // single row in each table
          const row = table.insertRow(i)

          // single td in row, represent years
          const yearCell = row.insertCell(0)
          yearCell.textContent = i

          // second fild in row td, field for amount
          const amountCell = row.insertCell(1)

          //calculation rates for each year with interest - deposit, interest , index
          const calculatedAmount = calculateCompoundInterest(deposit, rate, i)
    
          // insert result to second field in row
          amountCell.textContent = '$' + calculatedAmount.toFixed(2)

          // show rates
          const rateCell = row.insertCell(2)
          rateCell.textContent = rate / 100 + ' ' + '%'
        }
        
        // show table to the world
        document.getElementById('output').appendChild(table)
       })    
      }
 */
    

    // or only for loops
   
    function generateTables() {

        const deposit = 1000;
        const rates = [5, 6, 7];
        const years = 4;

        for (let i = 0; i < rates.length; i++) {
         // grab index
          const rate = rates[i];
          // create table
          const table = document.createElement('table');
          // create row = tr
          const tr = table.insertRow(0);
          // create 1st field in row = Year 
          const tdYear = tr.insertCell(0);
          tdYear.textContent = 'Year';
          // create 2nd field in row = Amount on deposit
          const tdAmount = tr.insertCell(1);
          tdAmount.textContent = 'Amount on deposit';
          // last field in row reates
          const tdRates = tr.insertCell(2);
          tdRates.textContent = 'Interest Rate';


          // loop 4 times to calc and insert amount of each year
          for (let j = 1; j <= years; j++) {
           /* 
             create row for each table = 
             first loop, 3 times (line 132) and now looping years = 4 times = 12 rows
           */
            const row = table.insertRow(j);
            // 1st field in row 
            const yearCell = row.insertCell(0);
            yearCell.textContent = j;

            // 2nd field in row amount
            const amountCell = row.insertCell(1);
            const calculatedAmount = calculateCompoundInterest(deposit, rate, j);
            amountCell.textContent = '$' + calculatedAmount.toFixed(2);

            // 3rd field in row rate
            const rateCell = row.insertCell(2);
            rateCell.textContent = rate / 100 + '%';
          }

          // show table to the world
          document.getElementById('output').appendChild(table)
        }
      } 

    window.onload =  generateTables;
  </script>


 </body>
</html>